!function(){"use strict";class t{constructor(t,e,n){let{name:s,link:i}=t;this._name=s,this._link=i,this._cardSelector=e,this._handleImageClick=n}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._cardElement.querySelector("#card-delete-button").addEventListener("click",(()=>{this._handleDeleteIcon()})),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this._name,link:this._link})}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_clicked")}_handleDeleteIcon(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTitleElement=this._cardElement.querySelector(".card__title"),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardTitleElement.textContent=this._name,this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._setEventListeners(),this._cardElement}}class e{constructor(t,e){this._formEl=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._formEl.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}_hasInvalidInput(){return this._inputEls.some((t=>!t.validity.valid))}_checkInputValidity(t){if(!t.validity.valid)return this._showInputError(t);this._hideInputError(t)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_toggleButtonState(){this._hasInvalidInput()?this.disableButton():this._enableButton()}_setEventListeners(){this._inputEls=Array.from(this._formEl.querySelectorAll(this._inputSelector)),this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputEls.forEach((t=>{t.addEventListener("input",(e=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}resetValidation(){this._inputEls.forEach((t=>{this._hideInputError(t),this._toggleButtonState()}))}enableValidation(){this._formEl.addEventListener("submit",(t=>{t.preventDefault(),this.disableButton()})),this._setEventListeners()}}const n={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__form-button",inactiveButtonClass:"modal__form-button_disabled",inputErrorClass:"modal__form-input_type_error",errorClass:"modal__error_visible"};class s{constructor(t){this._popupElement=document.querySelector(t)}open(){document.addEventListener("keydown",this.__handleEscClose),this._popupElement.classList.add("modal_opened")}close(){document.removeEventListener("keydown",this.__handleEscClose),this._popupElement.classList.remove("modal_opened")}__handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__container-close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(t=>{t.target.classList.contains("modal")&&this.close()}))}}class i extends s{constructor(t,e){super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._inputList=[...this._popupForm.querySelectorAll(".modal__form-input")],this._handleFormSubmit=e}_getInputValues(){const t={};return this._inputList.forEach((e=>{t[e.name]=e.value})),t}setEventListeners(){this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners(),super.close()}}const o=document.querySelector("#profile-edit-button"),r=document.querySelector("#profile-title"),l=document.querySelector("#profile-description"),a=document.querySelector("#modal-form-input-name"),c=document.querySelector("#modal-form-input-description"),u=document.forms["modal-form-element"],m=document.querySelector("#card-add-button"),d=document.forms["modal-card-form-element"],_=new e(u,n);_.enableValidation();const h=new e(d,n);h.enableValidation();const p=new class{constructor(t,e){let{items:n,renderer:s}=t;this._items=n,this._renderer=s,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Antelope Canyon",link:"https://images.unsplash.com/photo-1473456229365-7a538630163b?q=80&w=1770&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"New York City",link:"https://images.unsplash.com/photo-1448317971280-6c74e016e49c?q=80&w=1832&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Salt Lake City",link:"https://images.unsplash.com/photo-1584255391936-f4d73b095371?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Santa Barbara West Campus",link:"https://images.unsplash.com/photo-1590255041502-9a2603c6fd39?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Monument Valley",link:"https://images.unsplash.com/photo-1558353016-37b89cf18040?q=80&w=1931&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"},{name:"Lucia Falls",link:"https://images.unsplash.com/photo-1709336860701-5ac2d825a170?q=80&w=1935&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"}],renderer:v},"#card-list");p.renderItems();const f=new i("#card-adding-modal",(function(t){v({name:t.name,link:t.link}),f.close(),d.reset(),h.disableButton()}));f.setEventListeners();const E=new i("#profile-edit-modal",(function(t){S.setUserInfo({name:t.name,job:t.description}),b.close()}));E.setEventListeners();const b=new class extends s{constructor(t){super(t),this._popupImage=this._popupElement.querySelector(".modal__picture-container-image"),this._popupTitle=this._popupElement.querySelector(".modal__picture-container-title")}open(t){let{name:e,link:n}=t;this._popupImage.src=n,this._popupTitle.textContent=e,this._popupImage.alt=e,super.open()}}("#card-picture-modal");b.setEventListeners();const S=new class{constructor(t){let{nameSelector:e,jobSelector:n}=t;this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(n)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(t){let{name:e,job:n}=t;this._nameElement.textContent=e,this._jobElement.textContent=n}}({nameSelector:"#profile-title",jobSelector:"#profile-description"});function x(t){let{name:e,link:n}=t;b.open({name:e,link:n})}function v(e){const n=function(e){return new t(e,"#card-template",x).getView()}(e);p.addItem(n)}o.addEventListener("click",(function(){a.value=r.textContent.trim(),c.value=l.textContent.trim(),_.resetValidation(),E.open()})),m.addEventListener("click",(function(){f.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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dENtQixTQUNkLENBRXNCcUgsQ0FBV0YsR0FDL0I5QixFQUFRUyxRQUFRc0IsRUFDbEIsQ0F2Q0ExQyxFQUFrQm5GLGlCQUFpQixTQUFTLFdBQzFDc0YsRUFBa0JKLE1BQVFFLEVBQWFyRSxZQUFZZ0gsT0FDbkR4QyxFQUF3QkwsTUFBUUcsRUFBbUJ0RSxZQUFZZ0gsT0FDL0RuQyxFQUFrQm5DLGtCQUNsQm9ELEVBQWlCN0MsTUFDbkIsSUFFQTBCLEVBQWMxRixpQkFBaUIsU0FBUyxXQUN0QzJHLEVBQWEzQyxNQUNmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlcy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkLWRlbGV0ZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlSWNvbigpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlTGlrZUljb24oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9jbGlja2VkXCIpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUljb24oKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIHNldHRpbmdzKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBpbnB1dEVsLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dEVscy5zb21lKChpbnB1dEVsKSA9PiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRpc2FibGVCdXR0b24oKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm1FbC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkFudGVsb3BlIENhbnlvblwiLFxyXG4gICAgbGluazogXCJodHRwczovL2ltYWdlcy51bnNwbGFzaC5jb20vcGhvdG8tMTQ3MzQ1NjIyOTM2NS03YTUzODYzMDE2M2I/cT04MCZ3PTE3NzAmYXV0bz1mb3JtYXQmZml0PWNyb3AmaXhsaWI9cmItNC4wLjMmaXhpZD1NM3d4TWpBM2ZEQjhNSHh3YUc5MGJ5MXdZV2RsZkh4OGZHVnVmREI4Zkh4OGZBJTNEJTNEXCIsXHJcbiAgfSxcclxuXHJcbiAge1xyXG4gICAgbmFtZTogXCJOZXcgWW9yayBDaXR5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNDQ4MzE3OTcxMjgwLTZjNzRlMDE2ZTQ5Yz9xPTgwJnc9MTgzMiZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIlNhbHQgTGFrZSBDaXR5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTg0MjU1MzkxOTM2LWY0ZDczYjA5NTM3MT9xPTgwJnc9MTk3NCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIlNhbnRhIEJhcmJhcmEgV2VzdCBDYW1wdXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9pbWFnZXMudW5zcGxhc2guY29tL3Bob3RvLTE1OTAyNTUwNDE1MDItOWEyNjAzYzZmZDM5P3E9ODAmdz0xOTM1JmF1dG89Zm9ybWF0JmZpdD1jcm9wJml4bGliPXJiLTQuMC4zJml4aWQ9TTN3eE1qQTNmREI4TUh4d2FHOTBieTF3WVdkbGZIeDhmR1Z1ZkRCOGZIeDhmQSUzRCUzRFwiLFxyXG4gIH0sXHJcblxyXG4gIHtcclxuICAgIG5hbWU6IFwiTW9udW1lbnQgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTU4MzUzMDE2LTM3Yjg5Y2YxODA0MD9xPTgwJnc9MTkzMSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkx1Y2lhIEZhbGxzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNzA5MzM2ODYwNzAxLTVhYzJkODI1YTE3MD9xPTgwJnc9MTkzNSZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCZpeGxpYj1yYi00LjAuMyZpeGlkPU0zd3hNakEzZkRCOE1IeHdhRzkwYnkxd1lXZGxmSHg4ZkdWdWZEQjhmSHg4ZkElM0QlM0RcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0tYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fZm9ybS1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxufTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBzZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgfVxyXG5cclxuICBfX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2NvbnRhaW5lci1jbG9zZVwiXHJcbiAgICApO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IFtcclxuICAgICAgLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIiksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZXMgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VzLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbW9kYWwtZm9ybS1pbnB1dC1uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjbW9kYWwtZm9ybS1pbnB1dC1kZXNjcmlwdGlvblwiXHJcbik7XHJcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wibW9kYWwtZm9ybS1lbGVtZW50XCJdO1xyXG5cclxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgY2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbC1jYXJkLWZvcm0tZWxlbWVudFwiXTtcclxuXHJcbi8vY2xhc3MgaW5zdGFuY2VzXHJcblxyXG4vL0Zvcm1WYWxpZGF0b3JcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgcHJvZmlsZUZvcm1FbGVtZW50LFxyXG4gIHZhbGlkYXRpb25TZXR0aW5nc1xyXG4pO1xyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNhcmRGb3JtRWxlbWVudCxcclxuICB2YWxpZGF0aW9uU2V0dGluZ3NcclxuKTtcclxuXHJcbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vU2VjdGlvblxyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG4gIFwiI2NhcmQtbGlzdFwiXHJcbik7XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNjYXJkLWFkZGluZy1tb2RhbFwiLFxyXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XHJcbik7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IGltYWdlUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlcyhcIiNjYXJkLXBpY3R1cmUtbW9kYWxcIik7XHJcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIiNwcm9maWxlLXRpdGxlXCIsXHJcbiAgam9iU2VsZWN0b3I6IFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIixcclxufSk7XHJcblxyXG4vL0V2ZW50IGxpc3RlbmVyc1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVUaXRsZS50ZXh0Q29udGVudC50cmltKCk7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQudHJpbSgpO1xyXG4gIGVkaXRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmNhcmRBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uICgpIHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vIEV2ZW50IEhhbmRsZXJzXHJcblxyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgaW1hZ2VQcmV2aWV3UG9wdXAub3Blbih7IG5hbWUsIGxpbmsgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGRhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IGRhdGEubmFtZSwgam9iOiBkYXRhLmRlc2NyaXB0aW9uIH0pO1xyXG4gIGltYWdlUHJldmlld1BvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgY29uc3QgbmFtZSA9IGlucHV0VmFsdWVzLm5hbWU7XHJcbiAgY29uc3QgbGluayA9IGlucHV0VmFsdWVzLmxpbms7XHJcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfTtcclxuICByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxuICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICBjYXJkRm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5kaXNhYmxlQnV0dG9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlSW1hZ2VDbGljayk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZERhdGEpO1xyXG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2VzIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fcGljdHVyZS1jb250YWluZXItaW1hZ2VcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3BpY3R1cmUtY29udGFpbmVyLXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3BvcHVwVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG5cclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2NhcmRFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9oYW5kbGVEZWxldGVJY29uIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJnZXRWaWV3IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJfZGVsZXRlQnV0dG9uIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybUVsZW1lbnQiLCJzZXR0aW5ncyIsIl9mb3JtRWwiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJkaXNhYmxlQnV0dG9uIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZXZ0IiwicmVzZXRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInByZXZlbnREZWZhdWx0IiwidmFsaWRhdGlvblNldHRpbmdzIiwiUG9wdXAiLCJwb3B1cHNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJwb3B1cFNlbGVjdG9yIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVGb3JtRWxlbWVudCIsImZvcm1zIiwiY2FyZEFkZEJ1dHRvbiIsImNhcmRGb3JtRWxlbWVudCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJzZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckNhcmQiLCJuZXdDYXJkUG9wdXAiLCJyZXNldCIsInByb2ZpbGVFZGl0UG9wdXAiLCJkYXRhIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImpvYiIsImRlc2NyaXB0aW9uIiwiaW1hZ2VQcmV2aWV3UG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cFRpdGxlIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImdldFVzZXJJbmZvIiwiX3JlZjIiLCJjYXJkRGF0YSIsImNhcmRFbGVtZW50IiwiY3JlYXRlQ2FyZCIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9